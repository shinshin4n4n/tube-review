# TubeReview 改善イシュー一覧

このファイルをClaude Codeに渡して、GitHub Issuesを作成してもらう。
`.github/ISSUE_TEMPLATE/feature.md` のテンプレートに従って作成すること。

---

## Issue 1: バグ修正バッチ

### 基本情報
- **タイトル**: `fix: 動作不良箇所の一括修正`
- **ラベル**: `bug`, `P0`
- **見積もり時間**: 4時間

### 概要
現在動作しない機能・エラーが発生する箇所を修正する。
ユーザーが基本機能を使えない状態を解消することが目的。

### 目的
MVPとしての基本機能（レビュー閲覧、マイリスト管理、ランキング表示）が正常に動作する状態にする。

### タスク一覧

#### 1. トップ画面「すべてのレビューを見る」404エラー
- **現象**: リンクをクリックすると404ページが表示される
- **調査項目**:
  - リンク先のパス（href）を確認
  - 該当ページ（app/reviews/page.tsx等）の存在確認
  - ルーティング設定を確認
- **想定原因**: ページ未作成、またはパス不一致

#### 2. マイリスト画面でマイリスト取得失敗
- **現象**: マイリスト画面を開くとエラーが発生し、リストが表示されない
- **調査項目**:
  - ブラウザのコンソールエラーを確認
  - listsテーブルのRLSポリシーを確認
  - Server Action / API Routeの処理を確認
  - 認証状態（user_id）の取得を確認
- **想定原因**: RLSポリシーの設定ミス、または認証情報の取得失敗

#### 3. マイリスト作成ボタンが機能しない
- **現象**: 「最初のリストを作成」→入力→「作成」ボタンを押しても追加されない
- **調査項目**:
  - フォームのonSubmit処理を確認
  - listsテーブルへのINSERT処理を確認
  - 作成後の画面再取得（revalidate）を確認
- **想定原因**: Server Actionのエラーハンドリング、またはrevalidate漏れ

#### 4. チャンネル詳細画面「マイリストに追加」が機能しない
- **現象**: ボタンを押してもマイリストに追加されない
- **調査項目**:
  - user_channelsテーブルへのINSERT処理を確認
  - 認証状態の確認（ログイン必須か）
  - ボタンのクリックイベント発火を確認
- **想定原因**: 認証チェックの失敗、またはServer Actionの実行エラー

#### 5. ランキングページで全件表示されない
- **現象**: ランキングの一部しか表示されない
- **調査項目**:
  - データ取得クエリのLIMIT設定を確認
  - ページネーション実装の有無を確認
  - 「もっと見る」ボタンの動作を確認
- **想定原因**: LIMITの固定値、またはページネーション未実装

#### 6. テキストボックスの文字が見えない
- **現象**: 各所の入力欄で、入力中の文字が背景色に混ざって見えなくなる
- **調査項目**:
  - input/textareaのtext-color設定を確認
  - ダークモード対応の有無を確認
  - Tailwind CSSのクラス適用を確認
- **想定原因**: text-colorの未設定、またはダークモードとの競合

### 成果物
修正対象のファイル群（調査後に判明）

### 受入基準
- [ ] 「すべてのレビューを見る」クリックでレビュー一覧が表示される
- [ ] マイリスト画面でリストが正常に取得・表示される
- [ ] 新しいリストを作成でき、画面に反映される
- [ ] チャンネル詳細からマイリストに追加できる
- [ ] ランキングで全件（またはページネーション付き）表示される
- [ ] テキストボックスで入力文字が明確に見える

### 参照ドキュメント
- supabase/migrations/ のRLSポリシー
- app/ 配下のルーティング構造

---

## Issue 2: トップ画面UI改善

### 基本情報
- **タイトル**: `style: トップ画面UI改善 - Hero縮小とカード一覧性向上`
- **ラベル**: `enhancement`, `ui`
- **見積もり時間**: 2時間

### 概要
トップ画面のUI/UXを改善し、情報の一覧性を高める。
Hero欄が大きすぎてチャンネル情報が見えにくい問題を解消する。

### 目的
ファーストビューでより多くのチャンネル情報を見せ、ユーザーが能動的に発見できる体験を提供する。

### タスク一覧

#### 1. Hero欄の改善
- Hero欄のサイズを縮小する（現状：画面の大部分を占有）
- 「ブクログ」というワードをコピーから削除する
- キャッチコピーを短く簡潔にする
- 全体的に薄く・軽い印象に調整
- 参考: docs/CONCEPT.mdのコアバリューを反映したコピー

#### 2. カード表示の改善
- カードのpadding/marginを調整（詰める方向）
- カードの幅を調整して1行あたりの表示数を増やす
- 画面上に表示されるカード数を増やし一覧性を向上
- レスポンシブ対応を維持（モバイル/タブレット/デスクトップ）

### 成果物
```
app/
└── page.tsx（トップページ）
components/
├── hero/
│   └── Hero.tsx
└── channel/
    └── ChannelCard.tsx
```

### 受入基準
- [ ] Hero欄がファーストビューを占有しすぎない（画面の30%以下目安）
- [ ] 一画面でより多くのチャンネルカードが見える（改善前比）
- [ ] 「ブクログ」の文言が含まれていない
- [ ] モバイル・タブレット・デスクトップで適切に表示される

### 参照ドキュメント
- docs/CONCEPT.md（コンセプト、コピー文言）
- docs/WIREFRAME.md（レイアウト参考）

---

## Issue 3: ヘッダー2段構成への改修

### 基本情報
- **タイトル**: `style: ヘッダー2段構成への改修`
- **ラベル**: `enhancement`, `ui`
- **見積もり時間**: 3時間

### 概要
ヘッダーをブクログ同様の2段構成に変更し、すぐに使えるUIを実現する。
検索窓を目立つ位置に配置し、ナビゲーションを明確にする。

### 目的
ユーザーが迷わず目的の機能にアクセスできるUIを提供する。
「能動的なチャンネル発見」のため、検索へのアクセスを最優先にする。

### タスク一覧

#### 1. ヘッダー1行目
- ロゴを左端に配置
- 検索窓を中央〜左寄りに目立つように配置
- メニューアイコン（ユーザーアイコン or ハンバーガー）を右端に配置

#### 2. ヘッダー2行目（ナビゲーション）
- ナビメニューを横並びで配置
- 主要な導線: トップ、ランキング、カテゴリ、マイリスト、ちゅぶれびゅ！とは
- 現在のページをハイライト表示（アクティブ状態）

#### 3. レスポンシブ対応
- モバイル時: 検索窓をアイコン化 or 2行目に移動
- モバイル時: ナビメニューをハンバーガーメニュー内に格納
- スクロール時の挙動（sticky header）を検討

### 成果物
```
components/
└── layout/
    ├── Header.tsx
    ├── SearchBar.tsx
    └── NavMenu.tsx
```

### 受入基準
- [ ] 2段構成のヘッダーになっている
- [ ] 検索窓がすぐに使える位置にある
- [ ] ナビゲーションが明確で使いやすい
- [ ] 現在ページがハイライト表示される
- [ ] モバイルでも操作可能

### 参照ドキュメント
- ブクログのヘッダー（https://booklog.jp/）
- docs/UI_DESIGN.md

---

## Issue 4: 新規ページ作成とダミーデータ追加

### 基本情報
- **タイトル**: `feat: /aboutページ作成とダミーデータ追加`
- **ラベル**: `enhancement`, `feature`
- **見積もり時間**: 3時間

### 概要
「ちゅぶれびゅ！とは」ページを作成し、表示確認用のダミーデータを追加する。

### 目的
サービスのコンセプトをユーザーに伝え、カテゴリ・チャンネル表示の動作確認ができる状態にする。

### タスク一覧

#### 1. /about ページ作成
- app/about/page.tsx を作成
- docs/CONCEPT.md の内容をもとにページを構成
- 含める内容:
  - サービス概要
  - コアバリュー（3つ）
  - こんな人におすすめ（ターゲットユーザー）
  - 使い方の簡単な説明
- ヘッダーナビに「ちゅぶれびゅ！とは」リンクを追加

#### 2. カテゴリダミーデータ
- categoriesテーブル（または同等の構造）にダミーデータを作成
- カテゴリ例:
  - エンタメ
  - 教育・学習
  - ゲーム
  - テクノロジー
  - スポーツ
  - 音楽
  - ニュース・政治
  - Vlog・ライフスタイル
- 各カテゴリにチャンネルを紐付け

#### 3. VLOGチャンネルダミーデータ
- VLOG系YouTubeチャンネルのダミーデータを追加
- 実在するチャンネルIDを使用（表示確認しやすいため）
- scripts/seed.ts に追加する形で実装

### 成果物
```
app/
└── about/
    └── page.tsx

scripts/
└── seed.ts（更新）

supabase/
└── migrations/
    └── YYYYMMDDHHMMSS_add_categories.sql（必要に応じて）
```

### 受入基準
- [ ] /about ページにアクセスできる
- [ ] CONCEPT.mdの内容が反映されている
- [ ] ヘッダーナビから/aboutに遷移できる
- [ ] カテゴリページにダミーデータが表示される
- [ ] VLOGカテゴリのチャンネルが表示される

### 参照ドキュメント
- docs/CONCEPT.md
- scripts/seed.ts

---

## Issue 5: プロフィール編集機能

### 基本情報
- **タイトル**: `feat: プロフィール編集機能の実装`
- **ラベル**: `enhancement`, `feature`
- **見積もり時間**: 5時間

### 概要
ユーザーが自身のプロフィールを編集できる機能を実装する。
表示名・アイコンに加え、自己紹介等の詳細情報を設定可能にする。

### 目的
ユーザーが自己表現でき、コミュニティとしての魅力を高める。
レビュアーとしての信頼性を示す情報を提供可能にする。

### タスク一覧

#### 1. データベース変更（マイグレーション作成）
usersテーブルに以下のカラムを追加:
```sql
ALTER TABLE users ADD COLUMN IF NOT EXISTS bio TEXT;
ALTER TABLE users ADD COLUMN IF NOT EXISTS occupation TEXT;
ALTER TABLE users ADD COLUMN IF NOT EXISTS gender TEXT;
ALTER TABLE users ADD COLUMN IF NOT EXISTS birth_date DATE;
ALTER TABLE users ADD COLUMN IF NOT EXISTS prefecture TEXT;
ALTER TABLE users ADD COLUMN IF NOT EXISTS website_url TEXT;
```

#### 2. プロフィール編集ページ作成
- app/settings/profile/page.tsx を作成
- 編集可能項目:
  - 表示名（display_name）
  - アイコン画像（avatar_url）- Supabase Storage使用
  - 自己紹介（bio）- テキストエリア、500文字程度
  - 職業（occupation）
  - 性別（gender）- 選択肢: 男性/女性/その他/回答しない
  - 生年月日（birth_date）- 日付ピッカー
  - 都道府県（prefecture）- ドロップダウン（47都道府県）
  - ウェブサイトURL（website_url）

#### 3. バックエンド処理
- プロフィール更新のServer Action作成
- 画像アップロード処理（Supabase Storage）
- バリデーション:
  - URL形式チェック
  - 日付形式チェック
  - 文字数制限

#### 4. プロフィール表示ページ更新
- 追加項目をプロフィールページに表示
- 公開/非公開の考慮（将来拡張用にフラグを検討）

### 成果物
```
app/
└── settings/
    └── profile/
        └── page.tsx

components/
└── profile/
    ├── ProfileEditForm.tsx
    ├── AvatarUploader.tsx
    └── PrefectureSelect.tsx

lib/
└── actions/
    └── profile.ts

supabase/
└── migrations/
    └── YYYYMMDDHHMMSS_add_user_profile_fields.sql
```

### セキュリティ要件
- [ ] Layer 1: クライアント側バリデーション（フォーム入力時）
- [ ] Layer 2: サーバー側バリデーション（Zod）
- [ ] Layer 3: データベース制約（文字数制限等）
- [ ] Layer 4: RLSポリシー（自分のプロフィールのみ編集可能）

### 受入基準
- [ ] プロフィール編集画面が表示される
- [ ] 各項目が保存できる
- [ ] 保存後、プロフィールページに反映される
- [ ] アイコン画像がアップロード・表示できる
- [ ] マイグレーションが正常に適用される
- [ ] 他人のプロフィールは編集できない（RLS）

### 参照ドキュメント
- docs/DATABASE_DESIGN.md
- docs/AUTH_FLOW.md
- Supabase Storage ドキュメント

---

## Claude Codeへの指示

```
以下のファイルを読んで、GitHub Issuesを作成してください。

1. まず .github/ISSUE_TEMPLATE/feature.md を読んでテンプレート形式を確認
2. このファイル（improvement-issues.md）の5つのIssueを、テンプレートに沿って作成
3. gh issue create コマンドで作成

ラベルが存在しない場合は先に作成:
gh label create "bug" --color "d73a4a" --description "バグ修正"
gh label create "P0" --color "b60205" --description "最優先"
gh label create "enhancement" --color "a2eeef" --description "機能改善"
gh label create "ui" --color "7057ff" --description "UI/UX関連"
gh label create "feature" --color "0e8a16" --description "新機能"
```
