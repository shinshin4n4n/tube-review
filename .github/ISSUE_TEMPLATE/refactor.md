---
name: Refactoring
about: コード品質改善・技術的負債解消のイシュー
title: 'refactor: '
labels: ['refactor', 'tech-debt', 'priority-medium']
assignees: ''
---

## 📋 概要

<!-- 何をリファクタリングするか、簡潔に -->

## 💸 技術的負債

### 現在の問題

<!-- どのような技術的負債があるか -->

- 問題点1
- 問題点2
- 問題点3

### 負債の影響

- [ ] 保守性低下
- [ ] バグの温床
- [ ] パフォーマンス低下
- [ ] オンボーディング時間増加
- [ ] テストの困難さ

### なぜ今やるべきか

<!-- このタイミングでリファクタする理由 -->

## 📈 コード品質指標

### Before（現在の状態）

```typescript
// 現在のコード例
```

- 循環的複雑度:
- 重複コード:
- テストカバレッジ:

### After（改善後の目標）

```typescript
// 改善後のコード例
```

- 循環的複雑度: X以下
- 重複コード: 0箇所
- テストカバレッジ: 80%以上

## 🎯 リファクタリング方針

### アプローチ

<!-- どのようにリファクタリングするか -->

1. ステップ1
2. ステップ2
3. ステップ3

### 影響範囲

<!-- どのファイル・機能に影響するか -->

```
app/
├── _actions/
│   └── [file].ts (修正内容)
lib/
└── [file].ts (修正内容)
```

## 🔄 互換性チェック

- [ ] 既存APIの変更なし（シグネチャ変更なし）
- [ ] データベーススキーマ変更なし
- [ ] 外部依存関係の変更なし
- [ ] 環境変数の追加/変更なし
- [ ] パブリックAPIの変更なし

### 破壊的変更がある場合

<!-- 破壊的変更がある場合のみ記入 -->

- 変更内容:
- 移行方法:
- デプリケーション計画:

## 💼 ビジネス価値

### 短期的メリット（1-3ヶ月）

- メリット1
- メリット2

### 長期的メリット（3ヶ月以上）

- メリット1
- メリット2

### 定量的効果（可能な場合）

- バグ修正時間: XX%削減見込み
- 新機能開発速度: XX%向上見込み
- テスト実行時間: XX%短縮見込み

## 🧪 テスト戦略

### 既存テストの確認

- [ ] 既存のユニットテストが全てパス
- [ ] 既存のE2Eテストが全てパス
- [ ] リグレッションテストなし

### 新規テスト追加

- [ ] リファクタ対象のユニットテスト追加
- [ ] エッジケースのテストカバレッジ向上
- [ ] インテグレーションテスト追加（必要に応じて）

## ⚡ パフォーマンス影響

- [ ] パフォーマンス向上
- [ ] パフォーマンス影響なし
- [ ] パフォーマンス低下の可能性（要計測）

### 計測方法（パフォーマンス改善の場合）

```bash
# Before
# 計測コマンドと結果

# After
# 計測コマンドと結果
```

## 📦 変更対象ファイル

### 修正ファイル

```
app/
├── _actions/
│   └── [file].ts
│       - 関数A: エラーコード定数化
│       - 関数B: 型安全性向上

lib/
└── constants/
    └── [new-file].ts (新規作成)
```

### 削除ファイル

```
# 不要になるファイル（あれば）
```

## ✅ 受入基準

### コード品質

- [ ] ESLint エラーなし
- [ ] TypeScript エラーなし
- [ ] コードレビュー承認
- [ ] 複雑度が目標値以下

### テスト

- [ ] 全てのテストがパス
- [ ] カバレッジが低下していない
- [ ] 新規追加テストがパス

### ドキュメント

- [ ] CHANGELOG更新
- [ ] コメント・JSDoc更新
- [ ] README更新（必要に応じて）

## 🔗 関連イシュー

### Related（関連するイシュー）

- #XX: 関連するリファクタ
- #XX: 関連する機能改善

### Blocked by（このイシューを開始する前に完了必須）

- #XX: 依存するイシュー

### Blocks（このイシューが完了しないと開始できない）

- #XX: ブロックされているイシュー

## 📚 参考資料

### 内部ドキュメント

- [ ] コーディング規約
- [ ] アーキテクチャドキュメント
- [ ] 過去のリファクタ事例

### 外部リソース

- [Refactoring Guru](https://refactoring.guru/)
- [Clean Code principles](https://github.com/ryanmcdermott/clean-code-javascript)

## 🏷️ ラベル

- `refactor`: リファクタリング
- `tech-debt`: 技術的負債
- `priority-critical/high/medium/low`: 優先度
- `XS/S/M/L`: サイズ（XS: ~30min, S: 30min-1h, M: 1-2h, L: 2-3h）
- `breaking-change`: 破壊的変更がある場合のみ

## ⏱️ 見積もり時間

**予想時間**: X時間

### 内訳

- リファクタリング実装: X時間
- テスト追加/修正: X時間
- ドキュメント更新: X時間
- コードレビュー対応: X時間

## 📝 実装メモ

<!-- 実装中のメモ、決定事項、課題など -->

---

## 🎯 リファクタリングのチェックリスト

### Before（開始前）

- [ ] 既存のテストが全てパス
- [ ] 変更対象のコードを理解
- [ ] リファクタリング方針を決定

### During（実装中）

- [ ] 小さなステップで変更
- [ ] 各ステップでテスト実行
- [ ] コミットメッセージを明確に

### After（完了後）

- [ ] 全てのテストがパス
- [ ] コードレビュー実施
- [ ] ドキュメント更新完了
